<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ausstellungsort</title>
  <link rel="stylesheet" href="style.css">
  <script src="werke.js" defer></script>
</head>
<body>
  <div class="container">

    <!-- Logo -->
    <div class="logo">
      <img src="logo.jpg" alt="Flu – New Fine Art" style="max-height:100px;" onerror="this.style.display='none'">
    </div>

    <!-- Ort + Titel -->
    <h1 id="ort">Ausstellungsort</h1>
    <p id="meta">Titel · Datum</p>
    <p id="werk"><em>Werk + Serie</em></p>

    <!-- Buttons -->
    <div class="buttons">
      <button id="audioBtn">Audio</button>
      <button id="pdfBtn">PDF anzeigen</button>
      <button id="infoBtn">Info Künstler</button>
    </div>

    <!-- Audioplayer -->
    <div id="audioPlayer" style="margin-top:20px;">
      <audio id="audio" controls>
        <source id="audioSource" src="" type="audio/mpeg">
        Dein Browser unterstützt das Audio-Element nicht.
      </audio>
    </div>

    <!-- Hinweis -->
    <p style="color:red; margin-top:10px;">
      Bitte Kopfhörer verwenden oder die Lautstärke so wählen,<br>
      dass andere Besucher nicht gestört werden.
    </p>

    <!-- Footer -->
    <footer>
      <a href="https://www.flu.ruhr" target="_blank">www.flu.ruhr</a><br>
      © 2025 Flu – New Fine Art
    </footer>
  </div>

  <script>
    // URL-Parameter lesen (?id=Montan)
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    fetch("werke.json")
      .then(res => res.json())
      .then(data => {
        if (data[id]) {
          const werk = data[id];
          document.getElementById("ort").textContent = werk.ort || "Ausstellungsort";
          document.getElementById("meta").textContent = `${werk.titel} · ${werk.datum}`;
          document.getElementById("werk").textContent = `${werk.name} – ein Werk aus der Werkserie „${werk.serie}“`;

          // Audio laden
          const audioSource = document.getElementById("audioSource");
          audioSource.src = `audio/${werk.audio}`;
          document.getElementById("audio").load();

          // PDF Button
          document.getElementById("pdfBtn").onclick = () => {
            window.open(`pdf/${werk.pdf}`, "_blank");
          };

          // Audio Button (scroll zum Player)
          document.getElementById("audioBtn").onclick = () => {
            document.getElementById("audio").scrollIntoView({behavior:"smooth"});
            document.getElementById("audio").play();
          };

          // Info Button
          document.getElementById("infoBtn").onclick = () => {
            window.open("https://www.flu.ruhr", "_blank");
          };
        }
      });
  </script>
</body>
</html>
